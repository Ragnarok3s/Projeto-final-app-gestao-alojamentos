<section class="calendar-page">
  <div class="page-header">
    <button class="btn btn-secondary" type="button" (click)="goBack()">Voltar</button>
    <div>
      <h2>Calendário da unidade {{ unitId }}</h2>
      <p>Vista mensal/semanal com reservas ativas e canceladas.</p>
    </div>
    <button class="btn btn-primary" type="button" (click)="refresh()">Recarregar</button>
  </div>

  <div class="status" *ngIf="loading$ | async">A carregar reservas...</div>
  <div class="status error" *ngIf="error$ | async as error">{{ error }}</div>

  <div class="calendar-header">
    <button class="btn btn-secondary" type="button" (click)="changeMonth(-1)">&#8592; Mês anterior</button>
    <span class="current-month">{{ config.startDate?.toString('MMMM yyyy') }}</span>
    <button class="btn btn-secondary" type="button" (click)="changeMonth(1)">Próximo mês &#8594;</button>
  </div>

  <daypilot-calendar class="calendar" [events]="events" [config]="config"></daypilot-calendar>

  <app-reservation-detail-dialog
    *ngIf="selectedReservation"
    [reservation]="selectedReservation"
    [errorMessage]="error$ | async"
    (close)="closeDialog()"
    (update)="updateSelectedReservation($event)"
    (cancelReservation)="cancelSelectedReservation()"
  ></app-reservation-detail-dialog>
</section>
